<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        :root {
            --color-primary: #2196F3;
            --color-success: #4CAF50;
            --color-danger: #f44336;
            --color-dark: #212121;
            --color-light: #f5f5f5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 10px;
        }

        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            padding: 30px;
            max-width: 900px;
            width: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: var(--color-dark);
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat-box {
            background: var(--color-light);
            padding: 15px 25px;
            border-radius: 8px;
            text-align: center;
            flex: 1;
            min-width: 120px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .stat-value {
            color: var(--color-primary);
            font-size: 1.8em;
            font-weight: bold;
        }

        .game-wrapper {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .game-section {
            flex: 1;
            min-width: 300px;
        }

        #gameCanvas {
            display: block;
            border: 3px solid var(--color-primary);
            border-radius: 10px;
            background: #000;
            margin: 0 auto;
            cursor: none;
            max-width: 100%;
            height: auto;
        }

        .controls {
            text-align: center;
            margin-top: 20px;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 25px;
            font-size: 1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }

        .btn-danger {
            background: var(--color-danger);
            color: white;
        }

        .btn-danger:hover {
            background: #d32f2f;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.3);
        }

        .btn-success {
            background: var(--color-success);
            color: white;
        }

        .btn-success:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .leaderboard-section {
            flex: 1;
            min-width: 280px;
            background: var(--color-light);
            padding: 20px;
            border-radius: 10px;
        }

        .leaderboard-section h2 {
            color: var(--color-dark);
            margin-bottom: 15px;
            text-align: center;
        }

        .leaderboard {
            list-style: none;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            margin-bottom: 8px;
            background: white;
            border-left: 4px solid var(--color-primary);
            border-radius: 5px;
            animation: slideIn 0.3s ease;
        }

        .leaderboard-item.top-1 {
            border-left-color: #FFD700;
            background: #FFF9E6;
        }

        .leaderboard-item.top-2 {
            border-left-color: #C0C0C0;
        }

        .leaderboard-item.top-3 {
            border-left-color: #CD7F32;
        }

        .rank {
            font-weight: bold;
            color: var(--color-primary);
            width: 30px;
        }

        .name {
            flex: 1;
            margin: 0 10px;
            color: var(--color-dark);
        }

        .score {
            font-weight: bold;
            color: var(--color-success);
        }

        .instructions {
            margin-top: 20px;
            padding: 15px;
            background: #E3F2FD;
            border-left: 4px solid var(--color-primary);
            border-radius: 5px;
            color: #333;
        }

        .instructions h3 {
            margin-bottom: 10px;
            color: var(--color-primary);
        }

        .instructions ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        .name-input-group {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .name-input-group input {
            padding: 10px 15px;
            border: 2px solid var(--color-primary);
            border-radius: 5px;
            font-size: 0.95em;
            width: 150px;
        }

        .name-input-group input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        .game-status {
            text-align: center;
            margin: 15px 0;
            font-size: 1.1em;
            font-weight: 600;
            min-height: 25px;
        }

        .game-status.playing {
            color: var(--color-success);
        }

        .game-status.paused {
            color: #FF9800;
        }

        .game-status.gameover {
            color: var(--color-danger);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .container {
                padding: 20px;
            }

            .game-wrapper {
                gap: 15px;
            }

            #gameCanvas {
                max-width: 100%;
            }

            .leaderboard-section {
                min-width: 100%;
            }

            button {
                padding: 10px 15px;
                font-size: 0.9em;
            }
        }

        .sound-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--color-primary);
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .sound-toggle:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <button class="sound-toggle" id="soundToggle" title="Toggle Sound">üîä</button>

    <div class="container">
        <div class="header">
            <h1>üêç Snake Game</h1>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-label">Current Score</div>
                    <div class="stat-value" id="currentScore">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">High Score</div>
                    <div class="stat-value" id="highScore">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="level">1</div>
                </div>
            </div>
        </div>

        <div class="game-wrapper">
            <div class="game-section">
                <canvas id="gameCanvas" width="400" height="400"></canvas>
                
                <div class="game-status" id="gameStatus"></div>

                <div class="controls">
                    <div class="name-input-group">
                        <input type="text" id="playerName" placeholder="Enter your name" maxlength="15">
                    </div>
                    <div class="btn-group">
                        <button class="btn-primary" id="startBtn">Start Game</button>
                        <button class="btn-danger" id="pauseBtn">Pause</button>
                        <button class="btn-success" id="resetBtn">Reset</button>
                    </div>
                </div>

                <div class="instructions">
                    <h3>How to Play:</h3>
                    <ul>
                        <li><strong>Arrow Keys</strong> or <strong>WASD</strong> - Move the snake</li>
                        <li><strong>Space</strong> - Pause/Resume</li>
                        <li>Eat red food to grow and earn points</li>
                        <li>Avoid hitting walls and yourself</li>
                        <li>Each level increases the difficulty</li>
                    </ul>
                </div>
            </div>

            <div class="leaderboard-section">
                <h2>üèÜ Top Scores</h2>
                <ul class="leaderboard" id="leaderboard">
                    <li class="leaderboard-item">
                        <span class="rank">-</span>
                        <span class="name">No scores yet</span>
                        <span class="score">0</span>
                    </li>
                </ul>
                <div style="margin-top: 15px;">
                    <button class="btn-danger" id="clearLeaderboard" style="width: 100%;">Clear Leaderboard</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game Variables
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        const gridSize = 20;
        let snake = [{x: 10, y: 10}];
        let food = {x: 15, y: 15};
        let direction = {x: 1, y: 0};
        let nextDirection = {x: 1, y: 0};
        let score = 0;
        let level = 1;
        let gameRunning = false;
        let gamePaused = false;
        let gameLoopId = null;
        let soundEnabled = true;

        // Audio context for sound effects
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // UI Elements
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const soundToggle = document.getElementById('soundToggle');
        const clearLeaderboardBtn = document.getElementById('clearLeaderboard');
        const playerNameInput = document.getElementById('playerName');
        const gameStatus = document.getElementById('gameStatus');

        // Initialize
        loadLeaderboard();
        loadHighScore();
        updateUI();

        // Event Listeners
        startBtn.addEventListener('click', startGame);
        pauseBtn.addEventListener('click', togglePause);
        resetBtn.addEventListener('click', resetGame);
        soundToggle.addEventListener('click', toggleSound);
        clearLeaderboardBtn.addEventListener('click', clearLeaderboard);

        document.addEventListener('keydown', handleKeyPress);

        // Game Functions
        function startGame() {
            if (!gameRunning) {
                gameRunning = true;
                gamePaused = false;
                snake = [{x: 10, y: 10}];
                direction = {x: 1, y: 0};
                nextDirection = {x: 1, y: 0};
                score = 0;
                level = 1;
                generateFood();
                updateUI();
                updateGameStatus('playing');
                if (gameLoopId) clearInterval(gameLoopId);
                gameLoopId = setInterval(gameLoop, Math.max(50, 150 - level * 10));
                startBtn.textContent = 'Resume';
            }
        }

        function togglePause() {
            if (!gameRunning) return;
            gamePaused = !gamePaused;
            updateGameStatus(gamePaused ? 'paused' : 'playing');
            pauseBtn.textContent = gamePaused ? 'Resume' : 'Pause';
        }

        function resetGame() {
            gameRunning = false;
            gamePaused = false;
            clearInterval(gameLoopId);
            snake = [{x: 10, y: 10}];
            direction = {x: 1, y: 0};
            nextDirection = {x: 1, y: 0};
            score = 0;
            level = 1;
            generateFood();
            updateUI();
            updateGameStatus('');
            startBtn.textContent = 'Start Game';
            pauseBtn.textContent = 'Pause';
            draw();
        }

        function handleKeyPress(e) {
            if (!gameRunning) return;

            if (e.key === ' ') {
                e.preventDefault();
                togglePause();
                return;
            }

            const key = e.key.toLowerCase();
            const arrows = {
                'arrowup': {x: 0, y: -1},
                'arrowdown': {x: 0, y: 1},
                'arrowleft': {x: -1, y: 0},
                'arrowright': {x: 1, y: 0},
                'w': {x: 0, y: -1},
                's': {x: 0, y: 1},
                'a': {x: -1, y: 0},
                'd': {x: 1, y: 0}
            };

            if (arrows[key]) {
                e.preventDefault();
                const newDir = arrows[key];
                // Prevent reversing into itself
                if (direction.x + newDir.x !== 0 || direction.y + newDir.y !== 0) {
                    nextDirection = newDir;
                }
            }
        }

        function gameLoop() {
            if (gamePaused) return;

            direction = nextDirection;
            const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};

            // Check wall collision
            if (head.x < 0 || head.x >= canvas.width / gridSize || 
                head.y < 0 || head.y >= canvas.height / gridSize) {
                endGame();
                return;
            }

            // Check self collision
            if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                endGame();
                return;
            }

            snake.unshift(head);

            // Check food collision
            if (head.x === food.x && head.y === food.y) {
                score += 10 * level;
                level = Math.floor(score / 100) + 1;
                playSound('eat');
                generateFood();
                updateUI();
                // Speed up game
                clearInterval(gameLoopId);
                gameLoopId = setInterval(gameLoop, Math.max(50, 150 - level * 10));
            } else {
                snake.pop();
            }

            draw();
        }

        function endGame() {
            gameRunning = false;
            clearInterval(gameLoopId);
            updateGameStatus('gameover');
            playSound('gameover');
            saveScore();
            startBtn.textContent = 'Start Game';
            pauseBtn.textContent = 'Pause';
        }

        function generateFood() {
            let newFood;
            let collision = true;
            while (collision) {
                newFood = {
                    x: Math.floor(Math.random() * (canvas.width / gridSize)),
                    y: Math.floor(Math.random() * (canvas.height / gridSize))
                };
                collision = snake.some(segment => segment.x === newFood.x && segment.y === newFood.y);
            }
            food = newFood;
        }

        function draw() {
            // Clear canvas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw grid
            ctx.strokeStyle = '#111';
            ctx.lineWidth = 0.5;
            for (let i = 0; i <= canvas.width; i += gridSize) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }
            for (let i = 0; i <= canvas.height; i += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(canvas.width, i);
                ctx.stroke();
            }

            // Draw snake
            snake.forEach((segment, index) => {
                if (index === 0) {
                    ctx.fillStyle = '#4CAF50';
                } else {
                    ctx.fillStyle = '#45a049';
                }
                ctx.fillRect(segment.x * gridSize + 1, segment.y * gridSize + 1, gridSize - 2, gridSize - 2);
            });

            // Draw food
            ctx.fillStyle = '#FF5252';
            ctx.beginPath();
            ctx.arc(food.x * gridSize + gridSize / 2, food.y * gridSize + gridSize / 2, gridSize / 2 - 2, 0, Math.PI * 2);
            ctx.fill();
        }

        function updateUI() {
            document.getElementById('currentScore').textContent = score;
            document.getElementById('level').textContent = level;
            document.getElementById('highScore').textContent = localStorage.getItem('snakeHighScore') || 0;
        }

        function updateGameStatus(status) {
            const statusMap = {
                'playing': '‚ñ∂ Playing',
                'paused': '‚è∏ Paused',
                'gameover': '‚ò† Game Over!',
                '': ''
            };
            gameStatus.textContent = statusMap[status] || '';
            gameStatus.className = 'game-status ' + status;
        }

        function saveScore() {
            const playerName = playerNameInput.value || 'Anonymous';
            let scores = JSON.parse(localStorage.getItem('snakeScores')) || [];
            scores.push({name: playerName, score: score, date: new Date().toLocaleDateString()});
            scores.sort((a, b) => b.score - a.score);
            scores = scores.slice(0, 10);
            localStorage.setItem('snakeScores', JSON.stringify(scores));
            loadLeaderboard();
        }

        function loadLeaderboard() {
            const scores = JSON.parse(localStorage.getItem('snakeScores')) || [];
            const leaderboard = document.getElementById('leaderboard');
            
            if (scores.length === 0) {
                leaderboard.innerHTML = '<li class="leaderboard-item"><span class="rank">-</span><span class="name">No scores yet</span><span class="score">0</span></li>';
                return;
            }

            leaderboard.innerHTML = scores.map((entry, index) => 
                `<li class="leaderboard-item top-${index + 1}">
                    <span class="rank">#${index + 1}</span>
                    <span class="name">${entry.name}</span>
                    <span class="score">${entry.score}</span>
                </li>`
            ).join('');
        }

        function loadHighScore() {
            const scores = JSON.parse(localStorage.getItem('snakeScores')) || [];
            if (scores.length > 0) {
                localStorage.setItem('snakeHighScore', scores[0].score);
            }
        }

        function clearLeaderboard() {
            if (confirm('Are you sure you want to clear all scores?')) {
                localStorage.removeItem('snakeScores');
                localStorage.removeItem('snakeHighScore');
                loadLeaderboard();
                updateUI();
            }
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            soundToggle.textContent = soundEnabled ? 'üîä' : 'üîá';
        }

        function playSound(type) {
            if (!soundEnabled) return;

            const now = audioContext.currentTime;
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();

            osc.connect(gain);
            gain.connect(audioContext.destination);

            if (type === 'eat') {
                osc.frequency.setValueAtTime(400, now);
                osc.frequency.setValueAtTime(600, now + 0.1);
                gain.gain.setValueAtTime(0.3, now);
                gain.gain.setValueAtTime(0, now + 0.1);
                osc.start(now);
                osc.stop(now + 0.1);
            } else if (type === 'gameover') {
                osc.frequency.setValueAtTime(200, now);
                osc.frequency.setValueAtTime(100, now + 0.3);
                gain.gain.setValueAtTime(0.3, now);
                gain.gain.setValueAtTime(0, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            }
        }

        // Initial draw
        draw();
    </script>
</body>
</html>
